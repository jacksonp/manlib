<!-- Converted by db4-upgrade version 1.1 -->
<refentry xmlns="http://docbook.org/ns/docbook" version="5.0">
  <refmeta>
    <refentrytitle>EVP_DigestVerifyInit.pod</refentrytitle>
  </refmeta>
  <refnamediv>
    <refname>EVP_DigestVerifyInit, EVP_DigestVerifyUpdate, EVP_DigestVerifyFinal</refname>
<refpurpose>EVP signature verification functions</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
<synopsis format="linespecific">#include &lt;openssl/evp.h&gt;</synopsis>
<synopsis format="linespecific">int EVP_DigestVerifyInit(EVP_MD_CTX *ctx, EVP_PKEY_CTX **pctx,
                       const EVP_MD *type, ENGINE *e, EVP_PKEY *pkey);
int EVP_DigestVerifyUpdate(EVP_MD_CTX *ctx, const void *d, unsigned int cnt);
int EVP_DigestVerifyFinal(EVP_MD_CTX *ctx, const unsigned char *sig, size_t siglen);</synopsis>
  </refsynopsisdiv>
  <refsection xml:id="sources.openssl.doc.crypto.EVP_DigestVerifyInit.pod:DESCRIPTION"><title>DESCRIPTION</title>
    <para>
      The EVP signature routines are a high level interface to digital
      signatures.
    </para>
    <para>
      EVP_DigestVerifyInit() sets up verification context <emphasis role="bold">ctx</emphasis> to use digest <emphasis role="bold">type</emphasis> from ENGINE <emphasis role="bold">impl</emphasis> and public key <emphasis role="bold">pkey</emphasis>. <emphasis role="bold">ctx</emphasis>
      must be initialized with EVP_MD_CTX_init() before calling this
      function. If <emphasis role="bold">pctx</emphasis> is not NULL the
      EVP_PKEY_CTX of the verification operation will be written to
      <emphasis role="bold">*pctx</emphasis>: this can be used to set
      alternative verification options.
    </para>
    <para>
      EVP_DigestVerifyUpdate() hashes <emphasis role="bold">cnt</emphasis>
      bytes of data at <emphasis role="bold">d</emphasis> into the
      verification context <emphasis role="bold">ctx</emphasis>. This
      function can be called several times on the same <emphasis role="bold">ctx</emphasis> to include additional data. This function
      is currently implemented using a macro.
    </para>
    <para>
      EVP_DigestVerifyFinal() verifies the data in <emphasis role="bold">ctx</emphasis> against the signature in <emphasis role="bold">sig</emphasis> of length <emphasis role="bold">siglen</emphasis>.
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.EVP_DigestVerifyInit.pod:RETURN_VALUES"><title>RETURN VALUES</title>
    <para>
      EVP_DigestVerifyInit() and EVP_DigestVerifyUpdate() return 1 for
      success and 0 or a negative value for failure. In particular a return
      value of -2 indicates the operation is not supported by the public
      key algorithm.
    </para>
    <para>
      Unlike other functions the return value 0 from
      EVP_DigestVerifyFinal() only indicates that the signature did not not
      verify successfully (that is tbs did not match the original data or
      the signature was of invalid form) it is not an indication of a more
      serious error.
    </para>
    <para>
      The error codes can be obtained from ERR_get_error(3).
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.EVP_DigestVerifyInit.pod:NOTES"><title>NOTES</title>
    <para>
      The <emphasis role="bold">EVP</emphasis> interface to digital
      signatures should almost always be used in preference to the low
      level interfaces. This is because the code then becomes transparent
      to the algorithm used and much more flexible.
    </para>
    <para>
      In previous versions of OpenSSL there was a link between message
      digest types and public key algorithms. This meant that "clone"
      digests such as EVP_dss1() needed to be used to sign using SHA1 and
      DSA. This is no longer necessary and the use of clone digest is now
      discouraged.
    </para>
    <para>
      For some key types and parameters the random number generator must be
      seeded or the operation will fail.
    </para>
    <para>
      The call to EVP_DigestVerifyFinal() internally finalizes a copy of
      the digest context. This means that calls to EVP_VerifyUpdate() and
      EVP_VerifyFinal() can be called later to digest and verify additional
      data.
    </para>
    <para>
      Since only a copy of the digest context is ever finalized the context
      must be cleaned up after use by calling EVP_MD_CTX_cleanup() or a
      memory leak will occur.
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.EVP_DigestVerifyInit.pod:SEE_ALSO"><title>SEE ALSO</title>
    <para>
      EVP_DigestSignInit(3), EVP_DigestInit(3), err(3), evp(3), hmac(3),
      md2(3), md5(3), mdc2(3), ripemd(3), sha(3), dgst(1)
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.EVP_DigestVerifyInit.pod:HISTORY"><title>HISTORY</title>
    <para>
      EVP_DigestVerifyInit(), EVP_DigestVerifyUpdate() and
      EVP_DigestVerifyFinal() were first added to OpenSSL 1.0.0. 
    </para>
  </refsection>
</refentry>