<!-- Converted by db4-upgrade version 1.1 -->
<refentry xmlns="http://docbook.org/ns/docbook" version="5.0">
  <refmeta>
    <refentrytitle>CMS_get1_ReceiptRequest.pod</refentrytitle>
  </refmeta>
  <refnamediv>
    <refname>CMS_ReceiptRequest_create0, CMS_add1_ReceiptRequest, CMS_get1_ReceiptRequest, CMS_ReceiptRequest_get0_values</refname>
    <refpurpose>CMS signed receipt request functions.</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
<synopsis format="linespecific">#include &lt;openssl/cms.h&gt;</synopsis>
<synopsis format="linespecific">CMS_ReceiptRequest *CMS_ReceiptRequest_create0(unsigned char *id, int idlen, int allorfirst, STACK_OF(GENERAL_NAMES) *receiptList, STACK_OF(GENERAL_NAMES) *receiptsTo);
int CMS_add1_ReceiptRequest(CMS_SignerInfo *si, CMS_ReceiptRequest *rr);
int CMS_get1_ReceiptRequest(CMS_SignerInfo *si, CMS_ReceiptRequest **prr);
void CMS_ReceiptRequest_get0_values(CMS_ReceiptRequest *rr, ASN1_STRING **pcid, int *pallorfirst, STACK_OF(GENERAL_NAMES) **plist, STACK_OF(GENERAL_NAMES) **prto);</synopsis>
  </refsynopsisdiv>
  <refsection xml:id="sources.openssl.doc.crypto.CMS_get1_ReceiptRequest.pod:DESCRIPTION"><title>DESCRIPTION</title>
    <para>
      CMS_ReceiptRequest_create0() creates a signed receipt request
      structure. The <emphasis role="bold">signedContentIdentifier</emphasis> field is set using
      <emphasis role="bold">id</emphasis> and <emphasis role="bold">idlen</emphasis>, or it is set to 32 bytes of pseudo
      random data if <emphasis role="bold">id</emphasis> is NULL. If
      <emphasis role="bold">receiptList</emphasis> is NULL the
      allOrFirstTier option in <emphasis role="bold">receiptsFrom</emphasis> is used and set to the value of
      the <emphasis role="bold">allorfirst</emphasis> parameter. If
      <emphasis role="bold">receiptList</emphasis> is not NULL the
      <emphasis role="bold">receiptList</emphasis> option in <emphasis role="bold">receiptsFrom</emphasis> is used. The <emphasis role="bold">receiptsTo</emphasis> parameter specifies the <emphasis role="bold">receiptsTo</emphasis> field value.
    </para>
    <para>
      The CMS_add1_ReceiptRequest() function adds a signed receipt request
      <emphasis role="bold">rr</emphasis> to SignerInfo structure <emphasis role="bold">si</emphasis>.
    </para>
    <para>
      int CMS_get1_ReceiptRequest() looks for a signed receipt request in
      <emphasis role="bold">si</emphasis>, if any is found it is decoded
      and written to <emphasis role="bold">prr</emphasis>.
    </para>
    <para>
      CMS_ReceiptRequest_get0_values() retrieves the values of a receipt
      request. The signedContentIdentifier is copied to <emphasis role="bold">pcid</emphasis>. If the <emphasis role="bold">allOrFirstTier</emphasis> option of <emphasis role="bold">receiptsFrom</emphasis> is used its value is copied to
      <emphasis role="bold">pallorfirst</emphasis> otherwise the <emphasis role="bold">receiptList</emphasis> field is copied to <emphasis role="bold">plist</emphasis>. The <emphasis role="bold">receiptsTo</emphasis> parameter is copied to <emphasis role="bold">prto</emphasis>.
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.CMS_get1_ReceiptRequest.pod:NOTES"><title>NOTES</title>
    <para>
      For more details of the meaning of the fields see RFC2634.
    </para>
    <para>
      The contents of a signed receipt should only be considered meaningful
      if the corresponding CMS_ContentInfo structure can be successfully
      verified using CMS_verify().
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.CMS_get1_ReceiptRequest.pod:RETURN_VALUES"><title>RETURN VALUES</title>
    <para>
      CMS_ReceiptRequest_create0() returns a signed receipt request
      structure or NULL if an error occurred. 
    </para>
    <para>
      CMS_add1_ReceiptRequest() returns 1 for success or 0 is an error
      occurred.
    </para>
    <para>
      CMS_get1_ReceiptRequest() returns 1 is a signed receipt request is
      found and decoded. It returns 0 if a signed receipt request is not
      present and -1 if it is present but malformed.
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.CMS_get1_ReceiptRequest.pod:SEE_ALSO"><title>SEE ALSO</title>
    <para>
      ERR_get_error(3), CMS_sign(3), CMS_sign_receipt(3), CMS_verify(3)
      CMS_verify_receipt(3)
    </para>
  </refsection>
  <refsection xml:id="sources.openssl.doc.crypto.CMS_get1_ReceiptRequest.pod:HISTORY"><title>HISTORY</title>
    <para>
      CMS_ReceiptRequest_create0(), CMS_add1_ReceiptRequest(),
      CMS_get1_ReceiptRequest() and CMS_ReceiptRequest_get0_values() were
      added to OpenSSL 0.9.8
    </para>
  </refsection>
</refentry>