<!-- Converted by db4-upgrade version 1.1 -->
<refentry xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="systemd-run">

  <info>
    
    <productname>systemd</productname>

    <authorgroup>
      <author><personname><firstname>Lennart</firstname><surname>Poettering</surname></personname><contrib>Developer</contrib><email>lennart@poettering.net</email></author>
    </authorgroup>
  </info>

  <refmeta>
    <refentrytitle>systemd-run</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>systemd-run</refname>
    <refpurpose>Run programs in transient scope or service units</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis sepchar=" ">
      <command>systemd-run</command>
      <arg choice="opt" rep="repeat">OPTIONS</arg>
      <arg choice="plain" rep="norepeat"><replaceable>COMMAND</replaceable>
      <arg choice="opt" rep="repeat">ARGS</arg>
      </arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>Description</title>

    <para><command>systemd-run</command> may be used to create and start
    a transient <filename>.service</filename> or a
    <filename>.scope</filename> unit and run the specified
    <replaceable>COMMAND</replaceable> in it.</para>

    <para>If a command is run as transient service unit, it will be
    started and managed by the service manager like any other service,
    and thus show up in the output of <command>systemctl
    list-units</command> like any other unit. It will run in a clean
    and detached execution environment. <command>systemd-run</command>
    will start the service asynchronously in the background and
    immediately return.</para>

    <para>If a command is run as transient scope unit, it will be
    started directly by <command>systemd-run</command> and thus
    inherit the execution environment of the caller. It is however
    managed by the service manager similar to normal services, and
    will also show up in the output of <command>systemctl
    list-units</command>. Execution in this case is synchronous, and
    execution will return only when the command finishes.</para>
  </refsect1>

  <refsect1>
    <title>Options</title>

    <para>The following options are understood:</para>

    <variablelist>
      <varlistentry>
        <term><option>--scope</option></term>

        <listitem>
          <para>Create a transient <filename>.scope</filename> unit instead of
          the default transient <filename>.service</filename> unit.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--unit=</option></term>

        <listitem><para>Use this unit name instead of an automatically
        generated one.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--property=</option></term>
        <term><option>-p</option></term>

        <listitem><para>Sets a unit property for the scope or service
        unit that is created. This takes an assignment in the same
        format as
        <citerefentry><refentrytitle>systemctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>'s
        <command>set-property</command> command.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--description=</option></term>

        <listitem><para>Provide description for the service or scope
        unit. If not specified, the command itself will be used as a
        description.  See <varname>Description=</varname> in
        <citerefentry><refentrytitle>systemd.unit</refentrytitle><manvolnum>5</manvolnum></citerefentry>.
        </para></listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--slice=</option></term>

        <listitem><para>Make the new <filename>.service</filename> or
        <filename>.scope</filename> unit part of the specified slice,
        instead of the <filename>system.slice</filename>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--remain-after-exit</option></term>

        <listitem><para>After the service or scope process has
        terminated, keep the service around until it is explicitly
        stopped. This is useful to collect runtime information about
        the service after it finished running. Also see
        <varname>RemainAfterExit=</varname> in
        <citerefentry><refentrytitle>systemd.service</refentrytitle><manvolnum>5</manvolnum></citerefentry>.
        </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--send-sighup</option></term>

        <listitem><para>When terminating the scope or service unit,
        send a SIGHUP immediately after SIGTERM. This is useful to
        indicate to shells and shell-like processes that the
        connection has been severed. Also see
        <varname>SendSIGHUP=</varname> in
        <citerefentry><refentrytitle>systemd.kill</refentrytitle><manvolnum>5</manvolnum></citerefentry>.
        </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--service-type=</option></term>

        <listitem><para>Sets the service type. Also see
        <varname>Type=</varname> in
        <citerefentry><refentrytitle>systemd.service</refentrytitle><manvolnum>5</manvolnum></citerefentry>. This
        option has no effect in conjunction with
        <option>--scope</option>. Defaults to
        <constant>simple</constant>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--uid=</option></term>
        <term><option>--gid=</option></term>

        <listitem><para>Runs the service process under the UNIX user
        and group. Also see <varname>User=</varname> and
        <varname>Group=</varname> in
        <citerefentry><refentrytitle>systemd.exec</refentrytitle><manvolnum>5</manvolnum></citerefentry>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--nice=</option></term>

        <listitem><para>Runs the service process with the specified
        nice level. Also see <varname>Nice=</varname> in
        <citerefentry><refentrytitle>systemd.exec</refentrytitle><manvolnum>5</manvolnum></citerefentry>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>--setenv=</option></term>

        <listitem><para>Runs the service process with the specified
        environment variables set. Also see
        <varname>Environment=</varname> in
        <citerefentry><refentrytitle>systemd.exec</refentrytitle><manvolnum>5</manvolnum></citerefentry>.</para>
        </listitem>
      </varlistentry>

      <varlistentry xml:id="user">
    <term><option>--user</option></term>

    <listitem xml:id="user-text">
      <para>Talk to the service manager of the calling user,
      rather than the service manager of the system.</para>
    </listitem>
  </varlistentry>
      <varlistentry xml:id="system">
    <term><option>--system</option></term>

    <listitem xml:id="system-text">
      <para>Talk to the service manager of the system. This is the
      implied default.</para>
    </listitem>
  </varlistentry>
      <varlistentry xml:id="host">
    <term><option>-H</option></term>
    <term><option>--host=</option></term>

    <listitem xml:id="host-text">
      <para>Execute the operation remotely. Specify a hostname, or
      username and hostname separated by <literal>@</literal>, to
      connect to. This will use SSH to talk to the remote machine
      manager instance.</para>
    </listitem>
  </varlistentry>
      <varlistentry xml:id="machine">
    <term><option>-M</option></term>
    <term><option>--machine=</option></term>

    <listitem xml:id="machine-text">
      <para>Execute operation on a local container. Specify a
      container name to connect to.</para>
    </listitem>
  </varlistentry>

      <varlistentry xml:id="help">
    <term><option>-h</option></term>
    <term><option>--help</option></term>

    <listitem xml:id="help-text">
      <para>Print a short help text and exit.
    </para></listitem>
  </varlistentry>
      <varlistentry xml:id="version">
    <term><option>--version</option></term>

    <listitem xml:id="version-text">
      <para>Print a short version string and exit.</para>
    </listitem>
  </varlistentry>
    </variablelist>

    <para>All command-line arguments after the first non-option
    argument become part of the commandline of the launched
    process. If a command is run as service unit, its first argument
    needs to be an absolute binary path.</para>
  </refsect1>

  <refsect1>
    <title>Exit status</title>

    <para>On success, 0 is returned, a non-zero failure
    code otherwise.</para>
  </refsect1>

  <refsect1>
    <title>Examples</title>

    <para>The following command will log the environment variables
    provided by systemd to services:</para>

    <programlisting># systemd-run env
Running as unit run-19945.service.
# journalctl -u run-19945.service
Sep 08 07:37:21 bupkis systemd[1]: Starting /usr/bin/env...
Sep 08 07:37:21 bupkis systemd[1]: Started /usr/bin/env.
Sep 08 07:37:21 bupkis env[19948]: PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
Sep 08 07:37:21 bupkis env[19948]: LANG=en_US.UTF-8
Sep 08 07:37:21 bupkis env[19948]: BOOT_IMAGE=/vmlinuz-3.11.0-0.rc5.git6.2.fc20.x86_64</programlisting>

    <para>The following command invokes the
    <citerefentry><refentrytitle>updatedb</refentrytitle><manvolnum>8</manvolnum></citerefentry>
    tool but lowers the block IO weight for it to 10. See
    <citerefentry><refentrytitle>systemd.resource-control</refentrytitle><manvolnum>5</manvolnum></citerefentry>
    for more information on the <varname>BlockIOWeight=</varname>
    property.</para>

    <programlisting># systemd-run -p BlockIOWeight=10 updatedb</programlisting>
  </refsect1>

  <refsect1>
    <title>See Also</title>
    <para>
      <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.unit</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.service</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.scope</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.slice</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.exec</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>systemd.resource-control</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
      <citerefentry><refentrytitle>machinectl</refentrytitle><manvolnum>1</manvolnum></citerefentry>
    </para>
  </refsect1>

</refentry>