<!-- Converted by db4-upgrade version 1.1 -->
<refentry xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="pg3">
<refmeta><refentrytitle>pg3</refentrytitle>
<manvolnum>8</manvolnum>
<refmiscinfo>iputils-</refmiscinfo></refmeta>


<refnamediv><refname>pg3, ipg, pgset</refname>
<refpurpose>send stream of UDP packets</refpurpose></refnamediv>

<refsynopsisdiv><cmdsynopsis><command>source ipg</command></cmdsynopsis>
<cmdsynopsis><command>pg</command></cmdsynopsis>
<cmdsynopsis><command>pgset</command>
<arg choice="req"><replaceable>COMMAND</replaceable></arg></cmdsynopsis></refsynopsisdiv>

<refsect1><title>DESCRIPTION</title>
<para><command>ipg</command> is not a program, it is script which should be sourced
to <command>bash</command>. When sourced it loads module <filename>pg3</filename> and
exports a few of functions accessible from parent shell. These macros
are <command>pg</command> to start packet injection and to get the results of run;
and <command>pgset</command> to setup packet generator.</para>

<para><command>pgset</command> can send the following commands to module <filename>pg3</filename>:</para></refsect1>

<refsect1><title>COMMAND</title>

<variablelist>
 <varlistentry>  <term><option>odev <replaceable>DEVICE</replaceable></option></term>
  <listitem><para>Name of Ethernet device to test. See
<link linkend="pg3.warning">warning</link> below.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>pkt_size <replaceable>BYTES</replaceable></option></term>
  <listitem><para>Size of packet to generate. The size includes all the headers: UDP, IP,
MAC, but does not account for overhead internal to medium, i.e. FCS
and various paddings.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>frags <replaceable>NUMBER</replaceable></option></term>
  <listitem><para>Each packet will contain <replaceable>NUMBER</replaceable> of fragments.
Maximal amount for linux-2.4 is 6. Far not all the devices support
fragmented buffers.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>count <replaceable>NUMBER</replaceable></option></term>
  <listitem><para>Send stream of <replaceable>NUMBER</replaceable> of packets and stop after this.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>ipg <replaceable>TIME</replaceable></option></term>
  <listitem><para>Introduce artificial delay between packets of <replaceable>TIME</replaceable>
microseconds.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>dst <replaceable>IP_ADDRESS</replaceable></option></term>
  <listitem><para>Select IP destination where the stream is sent to.
Beware, never set this address at random. <command>pg3</command> is not a toy,
it creates really tough stream. Default value is 0.0.0.0.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>dst <replaceable>MAC_ADDRESS</replaceable></option></term>
  <listitem><para>Select MAC destination where the stream is sent to.
Default value is 00:00:00:00:00:00 in hope that this will not be received
by any node on LAN.
  </para></listitem>
 </varlistentry>

 <varlistentry>  <term><option>stop</option></term>
  <listitem><para>Abort packet injection.
  </para></listitem>
 </varlistentry>
</variablelist></refsect1>

<refsect1 xml:id="pg3.warning"><title>WARNING</title>
<para>When output device is set to some random device different
of hardware Ethernet device, <command>pg3</command> will crash kernel.</para>
<para>Do not use it on VLAN, ethertap, VTUN and other devices,
which emulate Ethernet not being real Ethernet in fact.</para></refsect1>

<refsect1><title>AUTHOR</title>
<para><command>pg3</command> was written by <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="mailto:robert.olsson@its.uu.se">Robert Olsson robert.olsson@its.uu.se</link>.</para></refsect1>

<refsect1><title>SECURITY</title>
<para>This can be used only by superuser.</para>
<para>This tool creates floods of packets which is unlikely to be handled
even by high-end machines. For example, it saturates gigabit link with
60 byte packets when used with Intel's e1000. In face of such stream
switches, routers and end hosts may deadlock, crash, explode.
Use only in test lab environment.</para></refsect1>

<refsect1><title>AVAILABILITY</title>
<para><command>pg3</command> is part of <filename>iputils</filename> package
and the latest versions are  available in source form at
<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.skbuff.net/iputils/iputils-current.tar.bz2">http://www.skbuff.net/iputils/iputils-current.tar.bz2</link>.</para></refsect1>

</refentry>